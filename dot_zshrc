autoload -Uz compinit
compinit

zstyle ':completion:*' menu select
zstyle ':completion:*' matcher-list 'm:{a-zA-Z}={A-Za-z}'  # case insensitive

# History
HISTFILE=~/.zsh_history
HISTSIZE=50000
SAVEHIST=10000
setopt extended_history hist_expire_dups_first hist_ignore_dups
setopt hist_ignore_space hist_verify share_history

# Directory navigation
setopt auto_cd auto_pushd pushd_ignore_dups pushdminus

# Key bindings (emacs mode)
bindkey -e
bindkey '^[[H' beginning-of-line      # Home
bindkey '^[[F' end-of-line            # End
bindkey '^[[1;5C' forward-word        # Ctrl-Right
bindkey '^[[1;5D' backward-word       # Ctrl-Left
bindkey '^[[3~' delete-char           # Delete

# Colors
autoload -Uz colors && colors
export CLICOLOR=1  # macOS ls colors

# Plugins replacement
eval "$(direnv hook zsh)"
eval "$(fzf --zsh)" source $ZSH/oh-my-zsh.sh

eval "$(starship init zsh)"

[ -s "$HOME/.scm_breeze/scm_breeze.sh" ] && source "$HOME/.scm_breeze/scm_breeze.sh"

eval "$(mise activate zsh)"
eval "$(zoxide init zsh)"

[ -s "$HOME/.zsh_after_oh_my_zsh" ] && source "$HOME/.zsh_after_oh_my_zsh"
[ -s "$HOME/.claude/env-setup.sh" ] && export CLAUDE_ENV_FILE="$HOME/.claude/env-setup.sh"
